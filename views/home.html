<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>React Project</title>
        <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
        <link rel="stylesheet" href="/css/style.css">
    </head>

    <body>
        <h2>Home</h2>
        <form method="POST" action="/detail">
            <input type="text" name="name" placeholder="character name" required maxlength="50">
            <button>Search Em!</button>
        </form>
        <h3>Bad DnD Characters</h3>



        <div id='root'></div>
            <script type='text/babel'>
        
            // const Welcome = (props) => {
            //     console.log(props);
            //     return <h1> Hello, {props.myname}</h1>
            // } //CLOSES WELCOME PROP
            
            const List = (props) => {
                let items_list= props.items.map((item) => {
                return<li onClick={props.onclick} key={item._id} id={item._id}>{item.name}
                    </li>
                }); //CLOSES items_list
                return(
                <div>
                    Character List
                    <ul>
                        {items_list}
                    </ul>
                </div>
            );
            }//CLOSES List

            const Detail = (props) => {
                return(
                    <div>
                        Name: {props.item.name}<br />
                        Strength: {props.item.strength}<br />
                        Weakness: {props.item.weakness}<br />
                    </div>
                )
            }

            // Define app container Component 
            class App extends React.Component {
                 constructor(props) {
                     super(props);  
                     this.state = {
                     items: {{{badDnDChar}}},
                     curItem: {}
                     };//END OF STATE
                     this.showDetail = this.showDetail.bind(this);
                }//CLOSES CONSTRUCTOR PROPS

                //show char details when clicked
                showDetail(event) {
                  //event.target is char being clicked ---this assumes each char has an id attribute  
                  let showItem = this.state.items.find((item) =>{
                      return item._id == event.target.id;
                  });
                  this.setState({curItem:showItem});
                }

                render(){
                return(
                    //<Welcome myname='Ariel' />      (goes inside div if you want to use it)
                    <div>  
                        <List items = {this.state.items} onclick ={this.showDetail}/>
                        <Detail item={this.state.curItem}/>
                    </div>
                );
                } //CLOSES RENDER 
            } //CLOSES REACT COMPONENT
            
            ReactDOM.render(<App/>, document.getElementById('root'));  
        </script> 
    </body>
</html>
